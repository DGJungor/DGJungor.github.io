---
title: 什么是单例??为什么要使用单例??
date: 2018-01-16 16:40:28
tags: [php,单例]
---

**到底什么是但单例呢?单例又可以用在什么地方呢?我们可以先从了解单例的特点开始了解 **


<!-- more -->



## 单例的特点主要有3个 ##
1. 只能有一个实例
2. 必须自行创建这个实例
3. 必须给其他对象提供这一实例


## 下面 我们还可以说下 php的单例有什么作用 ##
1. 在面向对象的方式开发中,我们无可避免地要多次new,如果使用了单例模式,则可以避免大量的new,从而减少资源的消耗.
2. 如果系统中需要有一个类来全局控制某些配置信息, 那么使用单例模式可以很方便的实现. 这个可以参看zend framework的FrontController部分.
3. 在一次页面请求中, 便于进行调试, 因为所有的代码(例如数据库操作类db)都集中在一个类中, 我们可以在类中设置钩子, 输出日志，从而避免到处var_dump, echo.

## 单例模式的要点如下 ##

1. $_instance 必须声明为静态的私有变量 
2. 构造函数和克隆函数必须声明为私有的,这是为了防止外部程序new 类从而失去单例模式的意义 
3. getInstance()方法必须声明为公有的,必须调用此方法以返回唯一实例的一个引用 
4. ::操作符只能访问静态变量或静态函数 
5. PHP的单例模式是相对而言的,因为PHP的解释运行机制使得每个PHP页面被解释执行后，所有的相关资源都会被回收。 也就是说，PHP在语言级别上没有办法让某个对象常驻内存。在PHP中，所有的变量都是页面级的，无论是全局变量， 还是类的静态成员，都会在页面执行完毕后被清空,结果会重新建立新的对象，这样也就完全失去了Singleton的意义。 不过,在实际应用中同一个页面中可能会存在多个业务逻辑,这时单例模式就起到了很重要的作用,有效的避免了重复 new 对象(注: new 对象会消耗内存资源)这么一个行为,所以我们说PHP的单例模式是相对而言的.

